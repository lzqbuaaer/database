<template>
  <div>
    <div style="height: 60px; background-color: #fff; display: flex; align-items: center; border-bottom: 1px solid #ddd">
      <div style="flex: 1">
        <div style="padding-left: 20px; display: flex; align-items: center">
          <img src="@/assets/imgs/logo.png" alt="" style="width: 40px">
          <div style="font-weight: bold; font-size: 24px; margin-left: 5px" v-if="user.role==='ADMIN'">管理员·综合管理系统</div>
          <div style="font-weight: bold; font-size: 24px; margin-left: 5px" v-if="user.role==='TEACHER'">教师·成绩管理系统</div>
          <div style="font-weight: bold; font-size: 24px; margin-left: 5px" v-if="user.role==='STUDENT'">学生·选课系统</div>
        </div>
      </div>
      <div style="width: fit-content; padding-right: 10px; display: flex; align-items: center;" v-if="user.role==='ADMIN'">
        <svg t="1732775645045" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="4272" width="45" height="45">
          <path d="M956.96497373 783.22135977c-3.28732207 17.50931455-14.60263008 28.85922598-28.7208123 28.85922598h-2.35303067c-27.68271065 0.06920684-50.10570703 22.49220234-50.17491299 50.17491386 0.3806376 6.57464414 1.90318623 13.04547715 4.42923311 19.10107002 6.74766035 15.70993857 1.59175547 33.94592402-12.35340967 43.80789024l-1.38413496 0.9342914-58.23750322 32.04273779a37.37165977 37.37165977 0 0 1-15.9521625 3.66795967c-10.93467041 0-21.73092803-4.60225107-28.58239863-12.24960029-7.50893555-8.13179619-27.37128076-24.94904326-41.35104932-24.94904238-13.66833867 0-33.87671719 16.81724707-40.93580919 24.49919883a39.34405283 39.34405283 0 0 1-43.1850287 8.96227733l-57.58003828-32.00813437c-15.15628388-10.51943028-20.45060244-29.41288066-13.56452842-44.77678506 1.21111875-2.83747763 4.39463057-11.83435927 4.39463056-18.96265635 0-27.64810722-22.5960126-50.17491387-50.2441207-50.17491386h-1.97239306c-14.46421641 0-25.71031758-11.38451484-29.06684649-28.92843281-0.51905039-2.66446055-4.94828438-26.99064316-4.94828437-46.5069542 0-19.58551787 4.42923398-43.98090732 4.94828437-46.57616104 3.35652891-17.50931455 14.60263008-28.92843281 28.7208123-28.92843281h2.35303067c27.68271065 0 50.17491387-22.38839209 50.24412071-50.07110362a56.40352383 56.40352383 0 0 0-4.46383741-19.17027685 36.26435127 36.26435127 0 0 1 12.4226165-43.84249365l1.38413584-0.83048116 59.69084502-32.80401211 1.14191192-0.44984443a39.69008701 39.69008701 0 0 1 42.80439111 8.92767393c7.26671162 7.6127458 26.81762607 23.49570059 40.34755195 23.49570146 13.32230449 0 32.76940869-15.53692148 40.03612031-23.11506386 11.31530801-11.17689434 28.20176192-14.53342325 42.90820137-8.54703721l58.61814082 32.42337539c15.22549073 10.51943028 20.5544127 29.4820875 13.63373526 44.8459919a59.06798438 59.06798438 0 0 0-4.32542373 18.99725976c0.06920684 27.64810722 22.49220234 50.0365002 50.17491299 50.07110362h2.00699648c14.42961299 0 25.71031758 11.38451484 29.06684649 28.96303623 0.48444785 2.62985713 4.94828438 26.95603974 4.94828524 46.57616102 0 20.58901612-4.94828438 46.33393711-4.87907841 46.54155763z m-43.70407998-77.30396983a95.74757666 95.74757666 0 0 1-83.29035586-94.88249209c0.17301709-9.89656875 1.90318623-19.65472471 5.12130146-28.99763965l-41.48946299-23.04585615a170.87153291 170.87153291 0 0 1-17.12867695 13.84135488c-18.1321752 12.73404727-35.43387011 19.17027685-51.6974625 19.17027774-16.50581631 0-34.01513086-6.43623047-52.21651376-19.51631103a149.83267237 149.83267237 0 0 1-17.16328038-14.22199336l-43.39265009 23.84173476c2.4222375 7.19750479 5.15590488 17.82074531 5.15590488 28.96303623a95.85138604 95.85138604 0 0 1-83.35956269 94.95169893 226.82521231 226.82521231 0 0 0-2.87208106 30.65860195c0.27682734 10.24260292 1.21111875 20.45060244 2.87208106 30.58939512a95.71297324 95.71297324 0 0 1 83.35956269 94.95169892c0 11.07308408-2.83747763 21.76553144-5.19050831 28.99763965l40.13993145 22.42299551c5.43273223-5.1905083 11.14229092-10.03498242 17.16328037-14.49881982 18.40900253-13.42611474 36.29895469-20.34679219 52.97778809-20.34679219 16.92105732 0 34.94942227 7.05909112 53.53144189 20.79663662 6.05559287 4.53304424 11.83435927 9.48132862 17.26709151 14.77564628l42.00851338-23.1496664a95.02090489 95.02090489 0 0 1-5.08669805-28.96303623 95.67836982 95.67836982 0 0 1 83.29035586-94.95169893c1.17651533-7.92417568 2.87208106-20.72742979 2.87208193-30.69320537 0-10.00037901-1.69556573-22.73442627-2.87208193-30.69320537z m-190.73387724 118.9664499a88.75769151 88.75769151 0 0 1-88.61927872-88.58467529 88.65388125 88.65388125 0 0 1 177.23855655 0 88.75769151 88.75769151 0 0 1-88.61927783 88.58467529z m0-129.76270752c-23.04585703 0-42.00851338 18.20138203-42.97740909 41.21263565a42.9774082 42.9774082 0 0 0 85.92021387 0 43.01201162 43.01201162 0 0 0-42.94280478-41.21263565z m-128.58619219-225.61409355l-14.42961299 11.21149776c-29.37827724 26.12555859-85.43576602 34.84561201-122.4959959 37.71769394l-4.74066387-0.10381026a344.64975029 344.64975029 0 0 0-31.21225664 1.48794522h-0.44984443l0.06920683 0.06920684c-167.65341768 15.81374883-299.28470801 156.30350625-299.284708 326.93281611v50.14030957h367.38417656a298.76565674 298.76565674 0 0 0 35.81450771 58.61814082H91.77644902A29.4820875 29.4820875 0 0 1 62.15594785 926.30637178v-79.4839834c0-159.10638047 96.47424756-300.18439599 245.85707637-359.42539746l16.92105732-6.6784544-14.36040615-11.21149775c-56.12669648-43.77328682-88.23864112-109.06988115-88.23864112-179.31475986 0-125.74871455 103.11809766-228.03633106 229.87031046-228.03633106 126.78681622 0 229.90491386 102.28761651 229.9741207 228.03633106 0 70.24487871-32.2503583 135.54147305-88.23864111 179.31475986zM452.23994815 120.80869209c-94.08661347 0-170.62930898 76.02364511-170.62930899 169.38358682 0 93.42914941 76.5426955 169.45279365 170.62930899 169.45279453 94.1212169 0 170.6639124-75.9890417 170.6639124-169.45279453 0-93.42914941-76.5426955-169.38358682-170.6639124-169.38358682z" p-id="4273"></path></svg>
        <span style="margin-left: 5px">{{user.name}}</span>
      </div>
      <div style="width: fit-content; padding-right: 10px; display: flex; align-items: center;" v-if="user.role==='TEACHER'">
        <svg t="1732776001989" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="6341" width="45" height="45"><path d="M684.762831 174.989829C684.762831 78.745923 605.549909 0 508.736003 0c-96.807905 0-176.026828 78.746923-176.026828 174.989829 0 96.241906 79.211923 174.981829 176.033828 174.981829 96.807905 0 176.019828-78.739923 176.019828-174.982829zM508.736003 285.162722c-60.95494 0-110.827892-49.582952-110.827892-110.174893 0-60.596941 49.872951-110.179892 110.827892-110.179892 60.96194 0 110.834892 49.582952 110.834892 110.179892 0 60.597941-49.872951 110.174892-110.834892 110.174893z m485.557526 383.931625h-95.568907l-144.693858-265.969741c-4.587996-18.256982-26.407974-31.959969-49.379952-31.959968H325.857182c-22.972978 0-44.786956 13.702987-49.380952 31.966968L131.789371 669.089347H29.700471c-12.630988 0-22.965978 16.753984-22.965978 29.317971 0 12.557988 10.33499 35.792965 22.972978 35.792965h68.890933v266.953739c0 12.557988 10.33399 22.837978 22.972977 22.837978h780.859238c12.631988 0 22.965978-10.27999 22.965977-22.837978V734.200283h68.897933c12.630988 0 22.965978-23.234977 22.965978-35.792965 0-12.556988-10.33499-29.304971-22.972978-29.304971z m-649.249366-237.028769c1.144999-1.144999 3.442997-2.282998 6.891993-2.282998h326.642681c2.289998 0 4.593996 1.144999 6.890994 2.282998 0 1.145999 1.145999 1.145999 1.145998 2.283998L822.119697 669.082347h-90.717911L640.683874 511.169501c-3.442997-12.563988-35.637965-18.269982-47.117954-14.847986-11.485989 3.429997-24.891976 17.124983-21.449979 28.537972l84.978917 144.22186H373.420135l84.977917-144.21586c3.442997-12.549988-8.817991-25.107975-21.449979-28.536972-11.485989-3.421997-43.674957 2.289998-47.116954 14.840986L299.112208 669.089347h-90.717912L343.900164 434.357576c0-1.144999 1.144999-1.144999 1.144999-2.283998zM163.143341 959.244063V736.120281H860.809659v223.123782H163.136341z" p-id="6342"></path></svg>
        <span style="margin-left: 5px">{{user.name}}</span>
      </div>
      <div style="width: fit-content; padding-right: 10px; display: flex; align-items: center;" v-if="user.role==='STUDENT'">
        <svg t="1732776090237" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="7472" width="45" height="45"><path d="M78.605809 620.348548c25.493776 0 42.489627-16.995851 42.489627-42.489627V301.676349L257.062241 352.6639v135.966805c0 25.493776 16.995851 42.489627 46.738589 59.485478 12.746888 114.721992 106.224066 199.701245 216.697095 199.701244 110.473029 0 203.950207-89.228216 216.697096-199.701244 25.493776-12.746888 46.738589-33.991701 46.738589-59.485478V352.6639l186.954357-72.232365c16.995851-4.248963 25.493776-21.244813 25.493776-38.240664s-8.497925-33.991701-25.493776-38.240664L533.244813 4.248963c-12.746888-4.248963-25.493776-4.248963-33.991701 0L65.858921 203.950207c-21.244813 4.248963-29.742739 21.244813-29.742738 38.240664v335.66805c0 25.493776 16.995851 42.489627 42.489626 42.489627z m437.643154 42.489626c-55.236515 0-101.975104-38.240664-123.219917-89.228215 63.73444 12.746888 123.219917 12.746888 123.219917 12.746887s63.73444 0 123.219917-12.746887c-21.244813 50.987552-67.983402 89.228216-123.219917 89.228215z m178.456431-191.203319c-25.493776 12.746888-89.228216 29.742739-178.456431 29.742738s-152.962656-16.995851-178.456432-29.742738v-84.979253l161.460581 63.734439c4.248963 0 8.497925 4.248963 16.995851 4.248963s8.497925 0 16.99585-4.248963l161.460581-63.734439v84.979253z m-178.456431-378.157677l322.921161 144.464731-322.921161 123.219917-322.921162-123.219917 322.921162-144.464731zM996.381743 956.016598c-89.228216-127.46888-276.182573-208.19917-480.13278-208.199171S125.344398 828.547718 36.116183 956.016598c-12.746888 21.244813-8.497925 46.738589 8.497925 59.485477 21.244813 12.746888 46.738589 8.497925 59.485477-8.497926 72.232365-106.224066 233.692946-169.958506 412.149378-169.958506s339.917012 67.983402 412.149377 169.958506c8.497925 12.746888 21.244813 16.995851 33.991701 16.995851 8.497925 0 16.995851-4.248963 25.493776-8.497925 16.995851-12.746888 21.244813-42.489627 8.497926-59.485477z" fill="#374151" p-id="7473"></path></svg>
        <span style="margin-left: 5px">{{user.name}}</span>
      </div>
    </div>

    <div style="display: flex">
      <div style="width: 200px; border-right: 1px solid #ddd; min-height: calc(100vh - 60px)">
        <el-menu
            router
            style="border: none"
            :default-active="$route.path"
            :default-openeds="['/home', '2']"
        >
          <el-menu-item index="/home">
            <el-icon><HomeFilled /></el-icon>
            <span>系统首页</span>
          </el-menu-item>
          <el-sub-menu index="2">
            <template #title>
              <el-icon><Memo /></el-icon>
              <span>课程管理</span>
            </template>
            <el-menu-item index="/course" v-if="user.role==='ADMIN'">
              <el-icon><Document /></el-icon>
              <span>课程信息</span>
            </el-menu-item>
            <el-menu-item index="/courselist" v-if="user.role==='STUDENT'">
              <el-icon><Document /></el-icon>
              <span>学生选课</span>
            </el-menu-item>
            <el-menu-item index="/studentcourseinfo">
              <el-icon><Document /></el-icon>
              <span>选课记录</span>
            </el-menu-item>
            <el-menu-item index="/coursetable" v-if="user.role==='STUDENT'">
              <el-icon><Document /></el-icon>
              <span>课程表</span>
            </el-menu-item>
          </el-sub-menu>
          <el-sub-menu index="4" v-if="user.role==='ADMIN'">
            <template #title>
              <el-icon><Promotion /></el-icon>
              <span>信息管理</span>
            </template>
            <el-menu-item index="/student">
              <el-icon><UserFilled /></el-icon>
              <span>学生信息</span>
            </el-menu-item>
            <el-menu-item index="/teacher">
              <el-icon><UserFilled /></el-icon>
              <span>教师信息</span>
            </el-menu-item>
            <el-menu-item index="/notice">
              <el-icon><Bell /></el-icon>
              <span>公告信息</span>
            </el-menu-item>
            <el-menu-item v-if="user.role==='ADMIN'" index="/log">
              <el-icon><Bell /></el-icon>
              <span>操作日志信息</span>
            </el-menu-item>
          </el-sub-menu>
          <el-menu-item index="/person">
            <el-icon><User /></el-icon>
            <span>个人资料</span>
          </el-menu-item>
          <el-menu-item index="login" @click="logout">
            <el-icon><SwitchButton /></el-icon>
            <span>退出系统</span>
          </el-menu-item>
        </el-menu>
      </div>

      <div style="flex: 1; width: 0; background-color: #f8f8ff; padding: 10px">
        <router-view />
      </div>
    </div>

  </div>
</template>

<script setup>
import { useRoute } from 'vue-router'
const $route = useRoute()

const user=JSON.parse(localStorage.getItem('student-user')||'{}');
const logout = () => {
  localStorage.removeItem('student-user')
}
</script>

<style scoped>
.el-menu-item.is-active {
  background-color: #dcede9 !important;
}
.el-menu-item:hover {
  color: #11A983;
}
</style>